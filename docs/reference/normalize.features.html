<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform feature normalization <U+2014> normalize.features <e2><80><a2> SIAMCAT</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">SIAMCAT</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="..//index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/SIAMCAT_vignette.html">SIAMCAT: Statistical Inference of Associations between Microbial Communities And host phenoTypes</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform feature normalization</h1>
    </div>

    
    <p>This function performs feature normalization according to user-
    specified parameters.</p>
    

    <pre class="usage"><span class='fu'>normalize.features</span>(<span class='no'>siamcat</span>,
<span class='kw'>norm.method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"rank.unit"</span>, <span class='st'>"rank.std"</span>, <span class='st'>"log.std"</span>, <span class='st'>"log.unit"</span>, <span class='st'>"log.clr"</span>),
<span class='kw'>norm.param</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>log.n0</span> <span class='kw'>=</span> <span class='fl'>1e-06</span>, <span class='kw'>sd.min.q</span> <span class='kw'>=</span> <span class='fl'>0.1</span>, <span class='kw'>n.p</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>norm.margin</span> <span class='kw'>=</span> <span class='fl'>1</span>),
<span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>1</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>siamcat</th>
      <td><p>an object of class <a href='siamcat-class.html'>siamcat-class</a></p></td>
    </tr>
    <tr>
      <th>norm.method</th>
      <td><p>string, normalization method, can be one of these:
'<code>c('rank.unit', 'rank.std', 'log.std', 'log.unit', 'log.clr')</code></p></td>
    </tr>
    <tr>
      <th>norm.param</th>
      <td><p>list, specifying the parameters of the different
normalization methods, see details for more information</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>control output: <code>0</code> for no output at all, <code>1</code>
for only information about progress and success, <code>2</code> for normal
level of information and <code>3</code> for full debug information,
defaults to <code>1</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <a href='siamcat-class.html'>siamcat-class</a> with normalized features</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are five different normalization methods available:</p><ul>
<li><p><code>'rank.unit'</code> converts features to ranks and normalizes each
    column (=sample) by the square root of the sum of ranks</p></li>
<li><p><code>'rank.std'</code> converts features to ranks and applies z-score
    standardization</p></li>
<li><p><code>'log.clr'</code> centered log-ratio transformation (with the 
    addition of pseudocounts)</p></li>
<li><p><code>'log.std'</code> log-transforms features (after addition of
    pseudocounts) and applies z-score standardization</p></li>
<li><p><code>'log.unit'</code> log-transforms features (after addition of
    pseudocounts) and normalizes by features or samples with different
    norms</p></li>
</ul>
    <p>The list entries in <code>'norm.param'</code> specify the normalzation parameters,
which are dependant on the normalization method of choice:</p><ul>
<li><p><code>'rank.unit'</code> does not require any other parameters</p></li>
<li><p><code>'rank.std'</code> requires <code>sd.min.q</code>, quantile of the
    distribution of standard deviations of all features that will be added
    to the denominator during standardization in order to avoid
    underestimation of the standard deviation, defaults to 0.1</p></li>
<li><p><code>'clr'</code> requires <code>log.n0</code>, which is the pseudocount to be
    added before log-transformation, defaults to <code>NULL</code> leading to
    the estimation of <code>log.n0</code> from the data</p></li>
<li><p><code>'log.std'</code> requires both <code>log.n0</code> and <code>sd.min.q</code>,
    using the same default values</p></li>
<li><p><code>'log.unit'</code> requires next to <code>log.n0</code> also the 
    parameters <code>n.p</code> and <code>norm.margin</code>. <code>n.p</code> specifies the 
    vector norm to be used, can be either <code>1</code> for <code>x/sum(x)</code> or
    <code>2</code> for <code>x/sqrt(sum(x^2))</code>. The parameter <code>norm.margin</code>
    specifies the margin over which to normalize, similarly to the
    <code>apply</code>-syntax: Allowed values are <code>1</code> for normalization
    over features, <code>2</code> over samples, and <code>3</code> for normalization
    by the global maximum.</p></li>
</ul>
    <p>The function additionally allows to perform a frozen normalization on a
different dataset. After normalizing the first dataset, the output list
<code>$par</code> contains all parameters of the normalization. Supplying this list
together with a new dataset will normalize the second dataset in a comparable
way to the first dataset (e.g. by using the same mean for the features for
z-score standardization)</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>    <span class='co'># Example data</span>
    <span class='fu'>data</span>(<span class='no'>siamcat_example</span>)
    <span class='co'># since the whole pipeline has been run in the example data, exchange the</span>
    <span class='co'># normalized features with the original features</span>
    <span class='no'>siamcat_example</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='reset.features.html'>reset.features</a></span>(<span class='no'>siamcat_example</span>)

    <span class='co'># Simple example</span>
    <span class='no'>siamcat_norm</span> <span class='kw'>&lt;-</span> <span class='fu'>normalize.features</span>(<span class='no'>siamcat_example</span>,
    <span class='kw'>norm.method</span><span class='kw'>=</span><span class='st'>'rank.unit'</span>)</div><div class='output co'>#&gt; <span class='message'>Features normalized successfully.</span></div><div class='input'>
    <span class='co'># log.unit example</span>
    <span class='no'>siamcat_norm</span> <span class='kw'>&lt;-</span> <span class='fu'>normalize.features</span>(<span class='no'>siamcat_example</span>,
    <span class='kw'>norm.method</span><span class='kw'>=</span><span class='st'>'log.unit'</span>, <span class='kw'>norm.param</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>log.n0</span><span class='kw'>=</span><span class='fl'>1e-05</span>, <span class='kw'>n.p</span><span class='kw'>=</span><span class='fl'>1</span>,
    <span class='kw'>norm.margin</span><span class='kw'>=</span><span class='fl'>1</span>))</div><div class='output co'>#&gt; <span class='message'>Features normalized successfully.</span></div><div class='input'>
    <span class='co'># log.std example</span>
    <span class='no'>siamcat_norm</span> <span class='kw'>&lt;-</span> <span class='fu'>normalize.features</span>(<span class='no'>siamcat_example</span>,
    <span class='kw'>norm.method</span><span class='kw'>=</span><span class='st'>'log.std'</span>, <span class='kw'>norm.param</span><span class='kw'>=</span><span class='fu'>list</span>(<span class='kw'>log.n0</span><span class='kw'>=</span><span class='fl'>1e-05</span>, <span class='kw'>sd.min.q</span><span class='kw'>=</span><span class='fl'>.1</span>))</div><div class='output co'>#&gt; <span class='message'>Features normalized successfully.</span></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Georg Zeller, Konrad Zych, Jakob Wirbel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
